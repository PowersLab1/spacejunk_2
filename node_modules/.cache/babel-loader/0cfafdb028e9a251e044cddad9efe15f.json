{"ast":null,"code":"var https=require('https');var querystring=require('querystring');var config=require('../config');export function aws_saveTaskData(encryptedMetadata,data){return new Promise(function(resolve,reject){// Call api endpoint for update\nvar postData=querystring.stringify({encrypted_metadata:encryptedMetadata,data:data});console.log(postData);var postOptions={hostname:config.awsLambda.saveTaskData.host,port:443,path:config.awsLambda.saveTaskData.path,method:'POST',headers:{'Content-Type':'application/x-www-form-urlencoded','Content-Length':Buffer.byteLength(postData),\"Mode\":\"no-cors\"}};var req=https.request(postOptions,function(res){res.setEncoding('utf8');res.on('data',function(){});res.on('end',resolve);});req.on('error',function(e){if(config.debug){console.log(\"ERROR:\");console.log(e);}reject(e);});req.write(postData);req.end();});}export function aws_fetchLink(encryptedMetadata){return new Promise(function(resolve,reject){// Call api endpoint for update\nvar postData=querystring.stringify({encrypted_metadata:encryptedMetadata});var postOptions={hostname:config.awsLambda.fetchLink.host,port:443,path:config.awsLambda.fetchLink.path,method:'POST',headers:{'Content-Type':'application/x-www-form-urlencoded','Content-Length':Buffer.byteLength(postData)}};var req=https.request(postOptions,function(res){res.setEncoding('utf8');var body='';res.on('data',function(d){body+=d;});res.on('end',function(){return resolve(body);});});req.on('error',function(e){if(config.debug){console.log(\"ERROR:\");console.log(e);}reject(e);});req.write(postData);req.end();});}","map":{"version":3,"names":["https","require","querystring","config","aws_saveTaskData","encryptedMetadata","data","Promise","resolve","reject","postData","stringify","encrypted_metadata","console","log","postOptions","hostname","awsLambda","saveTaskData","host","port","path","method","headers","Buffer","byteLength","req","request","res","setEncoding","on","e","debug","write","end","aws_fetchLink","fetchLink","body","d"],"sources":["/Users/msg74/Desktop/powers_lab/psychedelics_dissertation/Aim1_Online_Survey_Tasks/Tasks/SpaceGame/spacejunk_bl/src/lib/aws_lambda.js"],"sourcesContent":["var https = require('https');\r\nvar querystring = require('querystring');\r\nconst config = require('../config');\r\n\r\nexport function aws_saveTaskData(encryptedMetadata, data) {\r\n  return new Promise(function(resolve, reject) {\r\n    // Call api endpoint for update\r\n    const postData = querystring.stringify({\r\n        encrypted_metadata: encryptedMetadata,\r\n        data: data,\r\n    });\r\n    console.log(postData);\r\n    const postOptions = {\r\n      hostname: config.awsLambda.saveTaskData.host,\r\n      port: 443,\r\n      path: config.awsLambda.saveTaskData.path,\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/x-www-form-urlencoded',\r\n        'Content-Length': Buffer.byteLength(postData),\r\n        \"Mode\": \"no-cors\"\r\n      },\r\n    };\r\n\r\n    const req = https.request(postOptions, (res) => {\r\n      res.setEncoding('utf8');\r\n      res.on('data', () => {});\r\n      res.on('end', resolve);\r\n    });\r\n\r\n    req.on('error', (e) => {\r\n      if (config.debug) {\r\n        console.log(\"ERROR:\");\r\n        console.log(e);\r\n      }\r\n      reject(e);\r\n    });\r\n\r\n    req.write(postData);\r\n    req.end();\r\n  });\r\n}\r\n\r\n\r\nexport function aws_fetchLink(encryptedMetadata) {\r\n  return new Promise(function(resolve, reject) {\r\n    // Call api endpoint for update\r\n    const postData = querystring.stringify({\r\n        encrypted_metadata: encryptedMetadata,\r\n    });\r\n\r\n    const postOptions = {\r\n      hostname: config.awsLambda.fetchLink.host,\r\n      port: 443,\r\n      path: config.awsLambda.fetchLink.path,\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/x-www-form-urlencoded',\r\n        'Content-Length': Buffer.byteLength(postData),\r\n      },\r\n    };\r\n\r\n    const req = https.request(postOptions, (res) => {\r\n      res.setEncoding('utf8');\r\n      var body = '';\r\n      res.on('data', function(d) {\r\n          body += d;\r\n       });\r\n      res.on('end', () => resolve(body));\r\n    });\r\n\r\n    req.on('error', (e) => {\r\n      if (config.debug) {\r\n        console.log(\"ERROR:\");\r\n        console.log(e);\r\n      }\r\n      reject(e);\r\n    });\r\n\r\n    req.write(postData);\r\n    req.end();\r\n  });\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}